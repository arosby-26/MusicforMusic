<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Music Player with Equalizer</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #121212; color: white; display: flex; justify-content: center; padding: 40px; }
        .player { background: #181818; padding: 25px; border-radius: 20px; width: 380px; box-shadow: 0 15px 35px rgba(0,0,0,0.7); }
        .controls, .eq-controls { margin: 20px 0; display: flex; flex-direction: column; gap: 10px; }
        .row { display: flex; justify-content: space-between; align-items: center; background: #282828; padding: 10px; border-radius: 10px; }
        input[type="range"] { cursor: pointer; width: 120px; accent-color: #1DB954; }
        button { background: #1DB954; border: none; padding: 12px; border-radius: 50px; color: black; font-weight: bold; cursor: pointer; }
        .playlist { list-style: none; padding: 0; max-height: 150px; overflow-y: auto; border-top: 1px solid #333; }
        .playlist li { padding: 10px; cursor: pointer; border-radius: 5px; }
        .playlist li:hover { background: #282828; }
        .active { color: #1DB954; font-weight: bold; }
    </style>
</head>
<body>

<div class="player">
    <h3 id="display-title">Pilih Lagu...</h3>
    <audio id="audio-element" crossOrigin="anonymous"></audio>

    <div class="controls">
        <button onclick="playPause()" id="btn-play">‚ñ∂ PLAY</button>
        <div style="display:flex; gap:10px; justify-content: center;">
            <button onclick="prev()">‚èÆ Prev</button>
            <button onclick="next()">Next ‚è≠</button>
        </div>
    </div>

    <!-- PENGATUR SUARA (EQ) -->
    <div class="eq-controls">
        <div class="row">
            <span>üîä Volume</span>
            <input type="range" id="vol-control" min="0" max="1" step="0.1" value="0.5">
        </div>
        <div class="row">
            <span>üé∏ Bass</span>
            <input type="range" id="bass-control" min="-10" max="10" step="1" value="0">
        </div>
        <div class="row">
            <span>üéº Treble (Twiter)</span>
            <input type="range" id="treble-control" min="-10" max="10" step="1" value="0">
        </div>
    </div>

    <ul class="playlist" id="playlist-list"></ul>
</div>

<script>
    const songs = [
        { title: "OM ADELLA SPECIAL RELIGI 1", url: "OM_ADELLA_SPECIAL_RELIGI.mp3" },
        { title: "Lagu 2", url: "lagu2.mp3" }
    ];

    let currentIndex = 0;
    const audio = document.getElementById('audio-element');
    const playBtn = document.getElementById('btn-play');
    
    // --- LOGIKA WEB AUDIO API (Equalizer) ---
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    const source = audioCtx.createMediaElementSource(audio);

    // Filter Bass (LowShelf)
    const bassFilter = audioCtx.createBiquadFilter();
    bassFilter.type = "lowshelf";
    bassFilter.frequency.value = 200; // Frekuensi Bass

    // Filter Treble (HighShelf)
    const trebleFilter = audioCtx.createBiquadFilter();
    trebleFilter.type = "highshelf";
    trebleFilter.frequency.value = 3000; // Frekuensi Treble/Twitter

    // Sambungkan Jalur: Audio -> Bass -> Treble -> Speaker
    source.connect(bassFilter);
    bassFilter.connect(trebleFilter);
    trebleFilter.connect(audioCtx.destination);

    // Event Listeners untuk Slider
    document.getElementById('vol-control').oninput = (e) => audio.volume = e.target.value;
    document.getElementById('bass-control').oninput = (e) => bassFilter.gain.value = e.target.value;
    document.getElementById('treble-control').oninput = (e) => trebleFilter.gain.value = e.target.value;

    function playPause() {
        if (audioCtx.state === 'suspended') audioCtx.resume(); // Aktifkan Audio Context
        if (audio.src === "") { loadSong(0); return; }
        if (audio.paused) {
            audio.play();
            playBtn.innerText = "‚è∏ PAUSE";
        } else {
            audio.pause();
            playBtn.innerText = "‚ñ∂ PLAY";
        }
    }

    function loadSong(index) {
        currentIndex = index;
        audio.src = songs[currentIndex].url;
        document.getElementById('display-title').innerText = songs[currentIndex].title;
        audio.play();
        playBtn.innerText = "‚è∏ PAUSE";
    }

    function next() { currentIndex = (currentIndex + 1) % songs.length; loadSong(currentIndex); }
    function prev() { currentIndex = (currentIndex - 1 + songs.length) % songs.length; loadSong(currentIndex); }

    // Render Playlist
    songs.forEach((s, i) => {
        let li = document.createElement('li');
        li.innerHTML = s.title;
        li.onclick = () => loadSong(i);
        document.getElementById('playlist-list').appendChild(li);
    });
</script>

</body>
</html>

